\hypertarget{research}{%
\section{Research}\label{research}}

\hypertarget{what-can-the-functionality-of-the-device-drivers-be-implemented}{%
\subsection{What can the functionality of the device-drivers be
implemented}\label{what-can-the-functionality-of-the-device-drivers-be-implemented}}

In this section the implemented of the two device-drivers will be given.
In the FSP model the name stdin\_driver was used for device-driver0 and
stdout\_driver for device-driver1, these names will also be used in this
paper.

When executing an action the device-drivers execute the specified action
and determine their new sensitivity-list.

\hypertarget{how-is-the-functionality-of-stdin_driver-implemented}{%
\subsubsection{How is the functionality of stdin\_driver
implemented}\label{how-is-the-functionality-of-stdin_driver-implemented}}

As specified in the Requirements the functionality of stdin\_driver will
be to read from stdin. The following code snippet is used:

\begin{Shaded}
\begin{Highlighting}[]
\DataTypeTok{void}\NormalTok{ execute_action(}
\NormalTok{    finite_state_machine_t *self,}
    \DataTypeTok{int}\NormalTok{ action,}
    \DataTypeTok{int}\NormalTok{ sensitivity_list[ACTIONS])}
\NormalTok{\{}

\NormalTok{    fsm_set_sensitivity_list_empty(sensitivity_list);}

    \ControlFlowTok{switch}\NormalTok{ (action)}
\NormalTok{    \{}
    \ControlFlowTok{case}\NormalTok{ CHECK_STDIN_VALUE:}
\NormalTok{        action_check_stdin_value(sensitivity_list);}
        \ControlFlowTok{break}\NormalTok{;}

    \ControlFlowTok{case}\NormalTok{ W:}
\NormalTok{        array_copy(sensitivity_list, action_key(self->sensitivity_list, action));}
        \ControlFlowTok{break}\NormalTok{;}

    \ControlFlowTok{case}\NormalTok{ A:}
\NormalTok{        array_copy(sensitivity_list, action_key(self->sensitivity_list, action));}
        \ControlFlowTok{break}\NormalTok{;}

    \ControlFlowTok{case}\NormalTok{ S:}
\NormalTok{        array_copy(sensitivity_list, action_key(self->sensitivity_list, action));}
        \ControlFlowTok{break}\NormalTok{;}

    \ControlFlowTok{case}\NormalTok{ D:}
\NormalTok{        array_copy(sensitivity_list, action_key(self->sensitivity_list, action));}
        \ControlFlowTok{break}\NormalTok{;}

    \ControlFlowTok{default}\NormalTok{:}
        \ControlFlowTok{break}\NormalTok{;}
\NormalTok{    \}}
\NormalTok{\}}

\DataTypeTok{int}\NormalTok{ * action_key(}\DataTypeTok{int}\NormalTok{ sensitivity_list[ACTIONS], }\DataTypeTok{int}\NormalTok{ action)}
\NormalTok{\{}
    \ControlFlowTok{return}\NormalTok{ sensitivity_list[action];}
\NormalTok{\}}

\DataTypeTok{void}\NormalTok{ action_check_stdin_value(}\DataTypeTok{int}\NormalTok{ sensitivity_list[ACTIONS])}
\NormalTok{\{}
    \DataTypeTok{int}\NormalTok{ key = KEY_S;}
    \DataTypeTok{int}\NormalTok{ input = }\DecValTok{0}\NormalTok{;}
    \DataTypeTok{int}\NormalTok{ i = }\DecValTok{0}\NormalTok{;}

\NormalTok{    input = getchar();}

    \ControlFlowTok{for}\NormalTok{ (i = }\DecValTok{0}\NormalTok{; i < KEYS; i++)}
\NormalTok{    \{}
        \ControlFlowTok{if}\NormalTok{ (input == ALLOWED_KEYS[i])}
\NormalTok{        \{}
\NormalTok{            key = KEY_ACTIONS[i];}
\NormalTok{        \}}
\NormalTok{    \}}

\NormalTok{    sensitivity_list[key] = HAS_ACTION;}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\hypertarget{how-can-the-functionality-of-stdout_driver-be-implemented}{%
\subsubsection{How can the functionality of stdout\_driver be
implemented}\label{how-can-the-functionality-of-stdout_driver-be-implemented}}

As specified in the Requirements the functionality of stdout\_driver
will be to write to stdout. The following code snippet is used:

\begin{Shaded}
\begin{Highlighting}[]
\DataTypeTok{void}\NormalTok{ execute_action(}
\NormalTok{        finite_state_machine_t *self,}
        \DataTypeTok{int}\NormalTok{ action,}
        \DataTypeTok{int}\NormalTok{ sensitivity_list[ACTIONS]) \{}

    \ControlFlowTok{switch}\NormalTok{ (action)\{}
        \ControlFlowTok{case}\NormalTok{ FORWARD:}
\NormalTok{            array_copy(sensitivity_list, action_direction(self->sensitivity_list, FORWARD, }\CharTok{'F'}\NormalTok{);}
            \ControlFlowTok{break}\NormalTok{;}

        \ControlFlowTok{case}\NormalTok{ LEFT:}
\NormalTok{            array_copy(sensitivity_list, action_direction(self->sensitivity_list, LEFT, }\CharTok{'L'}\NormalTok{);}
            \ControlFlowTok{break}\NormalTok{;}

        \ControlFlowTok{case}\NormalTok{ BACK:}
\NormalTok{            array_copy(sensitivity_list, action_direction(self->sensitivity_list, BACK, }\CharTok{'B'}\NormalTok{);}
            \ControlFlowTok{break}\NormalTok{;}

        \ControlFlowTok{case}\NormalTok{ RIGHT:}
\NormalTok{            array_copy(sensitivity_list, action_direction(self->sensitivity_list, RIGHT, }\CharTok{'R'}\NormalTok{);}
            \ControlFlowTok{break}\NormalTok{;}

        \ControlFlowTok{case}\NormalTok{ WRITE_STDOUT:}
\NormalTok{            array_copy(sensitivity_list, action_write_stdout(self->sensitivity_list, WRITE_STDOUT);}
        \ControlFlowTok{break}\NormalTok{;}

        \ControlFlowTok{default}\NormalTok{:}
            \ControlFlowTok{break}\NormalTok{;}
\NormalTok{    \}}
\NormalTok{\}}

\DataTypeTok{int}\NormalTok{ * action_direction(}\DataTypeTok{int}\NormalTok{ sensitivity_list[ACTIONS], }\DataTypeTok{int}\NormalTok{ action, }\DataTypeTok{char}\NormalTok{ direction)}
\NormalTok{\{}
\NormalTok{    value_to_write = direction;}
    \ControlFlowTok{return}\NormalTok{ sensitivity_list[action];}
\NormalTok{\}}

\DataTypeTok{void}\NormalTok{ action_write_stdout(}\DataTypeTok{int}\NormalTok{ sensitivity_list[ACTIONS], }\DataTypeTok{int}\NormalTok{ action)}
\NormalTok{\{}
\NormalTok{    printf(}\StringTok{"%c }\SpecialCharTok{\textbackslash{}n}\StringTok{"}\NormalTok{, value_to_write);}
    \ControlFlowTok{return}\NormalTok{ sensitivity_list[action];}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

